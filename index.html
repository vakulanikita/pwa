<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PWA</title>
  <link rel="shortcut icon" href="images/android/android-launchericon-192-192.png?v=1">
  <link rel="manifest" href="manifest.json">

  <!-- <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(function (OneSignal) {
      OneSignal.init({
        appId: "8bf1266d-5569-41a2-a5ad-58b35c8c589c",
      });
    });
  </script> -->

  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(function(OneSignal) {
      OneSignal.init({
        appId: "c0c3bfdc-a53b-42f5-8738-3b59a5407ee6",
        safari_web_id: "web.onesignal.auto.3182d724-6e8d-450b-a283-f7f35292ae01",
        notifyButton: {
          enable: false,
        },
      });
    });
  </script>
</head>

<body>
  <h1>PWA</h1>

  <!-- <button onclick="main()">send notification</button> -->
  
  <button id="btn2" onclick="main()">open push prompt</button>
  
  <!-- PWA request script -->
  <!-- <button id="btn">install PWA</button> -->
  <!-- <script>
    // Initialize deferredPrompt for use later to show browser install prompt.
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      // Prevent the mini-infobar from appearing on mobile
      e.preventDefault();
      // Stash the event so it can be triggered later.
      deferredPrompt = e;
      // Update UI notify the user they can install the PWA
      // showInstallPromotion();
      // Optionally, send analytics event that PWA install promo was shown.
      console.log(`'beforeinstallprompt' event was fired.`);
    });

    const buttonInstall = document.querySelector("#btn")
    buttonInstall.addEventListener('click', async () => {
      // Hide the app provided install promotion
      // hideInstallPromotion();
      // Show the install prompt
      deferredPrompt.prompt();
      // Wait for the user to respond to the prompt
      const { outcome } = await deferredPrompt.userChoice;
      // Optionally, send analytics event with outcome of user choice
      console.log(`User response to the install prompt: ${outcome}`);
      // We've used the prompt, and can't use it again, throw it away
      deferredPrompt = null;
    });

    window.addEventListener('appinstalled', () => {
      // Hide the app-provided install promotion
      // hideInstallPromotion();
      // Clear the deferredPrompt so it can be garbage collected
      deferredPrompt = null;
      // Optionally, send analytics event to indicate successful install
      console.log('PWA was installed');
    });
  </script> -->

  <script src="./script.js"></script>
</body>

</html>